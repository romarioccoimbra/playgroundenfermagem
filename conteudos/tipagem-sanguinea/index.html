<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tipagem Sangu√≠nea e Pr√°tica</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <style>
      /* Estilos espec√≠ficos para a p√°gina de Tipagem Sangu√≠nea */

      /* NOVO: Wrapper para for√ßar rolagem em telas pequenas (Tabela Te√≥rica) */
      .table-wrapper {
        overflow-x: auto;
        margin: 20px 0; /* Espa√ßamento da tabela */
      }

      /* Estilo da tabela te√≥rica */
      .content-page table {
        width: 100%;
        border-collapse: collapse;
        min-width: 550px;
        font-size: 0.85rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .content-page th,
      .content-page td {
        border: 1px solid #ccc;
        padding: 8px 4px;
        text-align: center;
      }

      .content-page th {
        background-color: #f0f0f0;
        color: #333;
        font-weight: bold;
      }

      /* Estilos do Jogo de Pr√°tica (mobile-first) */

      .pratica-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top: 30px;
      }

      .section-pratica {
        background: #f7f7f7;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        /* MOBILE FIRST: Permite rolagem horizontal por padr√£o */
        overflow-x: auto;
      }

      .section-pratica table {
        border-collapse: collapse;
        margin-top: 10px;
        min-width: 350px;
        font-size: 0.85rem;
      }

      .section-pratica th,
      .section-pratica td {
        padding: 4px;
        border: 1px solid #ddd;
        text-align: center;
      }

      /* NOVO: Regra para estreitar a primeira coluna da tabela de pr√°tica */
      .section-pratica tr td:first-child {
        width: 50px;
        min-width: 50px;
        max-width: 50px;
      }

      /* AJUSTES AQUI para ULTRA-COMPACTAR o espa√ßo vertical da √°rea arrast√°vel */
      .draggables {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 3px;
        margin: 3px 0;
        padding: 3px;
        background-color: #e0f2f1;
        border-radius: 8px;
      }

      .draggable {
        padding: 3px 8px;
        background-color: #00796b;
        color: white;
        border-radius: 6px;
        cursor: grab;
        user-select: none;
        font-size: 13px;
      }
      /* FIM DOS AJUSTES DE COMPACTA√á√ÉO */

      .dropzone {
        min-height: 36px;
        padding: 5px;
        background-color: #fff;
        border: 1px dashed #ccc;
        border-radius: 5px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 5px;
        position: relative;
      }

      .dropzone.correct {
        background-color: #d4edda;
        border: 2px solid #28a745;
      }

      .dropzone.wrong {
        background-color: #f8d7da;
        border: 2px solid #dc3545;
      }

      .dropzone span.tipo {
        padding: 4px 8px;
        background-color: #6c757d;
        color: white;
        border-radius: 3px;
        cursor: pointer;
      }

      .checkmark {
        position: absolute;
        top: 4px;
        right: 6px;
        color: green;
        font-weight: bold;
      }

      #limpar {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
        background-color: #ff4136;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
      }

      #limpar:hover {
        background-color: #e00;
      }

      /* Layout em Desktop (Sobrescreve o mobile) */
      @media (min-width: 768px) {
        .pratica-container {
          flex-direction: row; /* DESKTOP: Coloca lado a lado */
          justify-content: space-around;
          align-items: flex-start;
          gap: 20px;
        }

        .section-pratica {
          overflow-x: hidden; /* DESKTOP: N√£o precisa de rolagem aqui */
          width: 100%;
          max-width: 350px;
        }

        .section-pratica table {
          min-width: auto; /* DESKTOP: Permite a tabela se ajustar */
        }

        .draggables {
          flex-direction: column;
          align-items: center;
          justify-content: center;
          max-width: 140px;
          margin: auto;
        }

        .section-pratica h3 {
          text-align: center;
          margin: 0;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ü©∏ Tipagem Sangu√≠nea</h1>
      <nav>
        <a href="../../index.html" class="voltar">‚¨Ö Voltar ao in√≠cio</a>
      </nav>
    </header>

    <main class="content-page">
      <article>
        <h2>ü©∏ Tipagem Sangu√≠nea</h2>
        <p>
          O tipo sangu√≠neo √© uma classifica√ß√£o que identifica os
          <strong>ant√≠genos</strong> presentes na superf√≠cie das hem√°cias
          (gl√≥bulos vermelhos) e os <strong>anticorpos</strong> presentes no
          plasma.
        </p>

        <h3>Grupos Sangu√≠neos ABO</h3>
        <p>Existem 4 principais grupos sangu√≠neos do sistema ABO:</p>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Grupo</th>
                <th>Ant√≠geno na hem√°cia</th>
                <th>Anticorpo no plasma</th>
                <th>Pode receber sangue de</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>A</strong></td>
                <td>A</td>
                <td>Anti-B</td>
                <td>A e O</td>
              </tr>
              <tr>
                <td><strong>B</strong></td>
                <td>B</td>
                <td>Anti-A</td>
                <td>B e O</td>
              </tr>
              <tr>
                <td><strong>AB</strong></td>
                <td>A e B</td>
                <td>N√£o tem</td>
                <td>A, B, AB e O (receptor universal)</td>
              </tr>
              <tr>
                <td><strong>O</strong></td>
                <td>N√£o tem</td>
                <td>Anti-A e Anti-B</td>
                <td>O</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Fator Rh</h3>
        <p>
          Al√©m do sistema ABO, o <strong>fator Rh (Rhesus)</strong> √©
          importante. Se a pessoa tem o ant√≠geno D, ela √© <strong>Rh+</strong>;
          se n√£o, √© <strong>Rh-</strong>.
        </p>
        <ul>
          <li><strong>Rh+</strong> pode receber sangue Rh+ ou Rh-.</li>
          <li>
            <strong>Rh-</strong> deve receber apenas sangue Rh- para evitar
            rea√ß√µes.
          </li>
        </ul>

        <h3>Exemplo de C√°lculo de Compatibilidade</h3>
        <p>
          C√°lculo para doa√ß√£o de sangue para uma pessoa <strong>A+</strong>:
        </p>
        <ul>
          <li>Pode receber sangue dos grupos: A+ e A-, O+ e O-</li>
          <li>Por ser Rh+, pode receber tanto Rh+ quanto Rh-</li>
        </ul>
        <p>Logo, os tipos compat√≠veis s√£o: <strong>A+, A-, O+, O-</strong></p>

        <hr />

        <h2>Pr√°tica: Teste de Compatibilidade</h2>

        <div class="pratica-container">
          <div class="section-pratica">
            <h3>Pode Doar Para</h3>
            <table>
              <tbody id="doar-tabela"></tbody>
            </table>
          </div>

          <div class="draggables" id="tipos"></div>

          <div class="section-pratica">
            <h3>Pode Receber De</h3>
            <table>
              <tbody id="receber-tabela"></tbody>
            </table>
          </div>
        </div>

        <button id="limpar">Limpar Respostas</button>
      </article>
    </main>

    <footer>
      <p>
        Playground da Enfermagem - 2025 <br />
        Rom√°rio Coimbra
      </p>
    </footer>

    <script>
      // L√ìGICA DO JOGO DRAG-AND-DROP (Mantida do seu c√≥digo original)
      const tipos = ["O‚àí", "O+", "A‚àí", "A+", "B‚àí", "B+", "AB‚àí", "AB+"];

      const doacoes = {
        "O‚àí": ["O‚àí", "O+", "A‚àí", "A+", "B‚àí", "B+", "AB‚àí", "AB+"],
        "O+": ["O+", "A+", "B+", "AB+"],
        "A‚àí": ["A‚àí", "A+", "AB‚àí", "AB+"],
        "A+": ["A+", "AB+"],
        "B‚àí": ["B‚àí", "B+", "AB‚àí", "AB+"],
        "B+": ["B+", "AB+"],
        "AB‚àí": ["AB‚àí", "AB+"],
        "AB+": ["AB+"],
      };

      const recebimentos = {
        "O‚àí": ["O‚àí"],
        "O+": ["O‚àí", "O+"],
        "A‚àí": ["O‚àí", "A‚àí"],
        "A+": ["O‚àí", "O+", "A‚àí", "A+"],
        "B‚àí": ["O‚àí", "B‚àí"],
        "B+": ["O‚àí", "O+", "B‚àí", "B+"],
        "AB‚àí": ["O‚àí", "A‚àí", "B‚àí", "AB‚àí"],
        "AB+": ["O‚àí", "O+", "A‚àí", "A+", "B‚àí", "B+", "AB‚àí", "AB+"],
      };

      const tiposContainer = document.getElementById("tipos");
      tipos.forEach((tipo) => {
        const div = document.createElement("div");
        div.textContent = tipo;
        div.className = "draggable";
        div.draggable = true;
        div.dataset.type = tipo;
        tiposContainer.appendChild(div);
      });

      function criarTabela(id, dados, tipo) {
        const tbody = document.getElementById(id);
        tbody.innerHTML = "";
        Object.entries(dados).forEach(([tipoBase, respostas]) => {
          const tr = document.createElement("tr");
          const tdTipo = document.createElement("td");
          tdTipo.textContent = tipoBase;
          tr.appendChild(tdTipo);

          const tdDrop = document.createElement("td");
          const dropzone = document.createElement("div");
          dropzone.className = "dropzone";
          dropzone.dataset.para = tipoBase;
          dropzone.dataset.tipo = tipo;
          dropzone.dataset.resposta = JSON.stringify(respostas.sort());
          tdDrop.appendChild(dropzone);
          tr.appendChild(tdDrop);
          tbody.appendChild(tr);
        });
      }

      criarTabela("doar-tabela", doacoes, "doar");
      criarTabela("receber-tabela", recebimentos, "receber");

      document.querySelectorAll(".draggable").forEach((el) => {
        el.addEventListener("dragstart", (ev) => {
          ev.dataTransfer.setData("text/plain", ev.target.dataset.type);
        });
      });

      document.addEventListener("dragover", (ev) => ev.preventDefault());

      document.querySelectorAll(".dropzone").forEach((zone) => {
        zone.addEventListener("drop", (ev) => {
          ev.preventDefault();
          const tipo = ev.dataTransfer.getData("text/plain");
          if (!tipo) return;

          const existente = Array.from(zone.children).find(
            (el) => el.textContent === tipo && el.classList.contains("tipo")
          );
          if (!existente) {
            const span = document.createElement("span");
            span.textContent = tipo;
            span.className = "tipo";
            span.addEventListener("click", () => {
              span.remove();
              validarDropzone(zone);
            });
            zone.appendChild(span);
          }

          validarDropzone(zone);
        });
      });

      function validarDropzone(zone) {
        const resposta = JSON.parse(zone.dataset.resposta);
        const inseridos = Array.from(zone.querySelectorAll("span.tipo"))
          .map((el) => el.textContent)
          .sort();
        const checkExistente = zone.querySelector(".checkmark");

        if (JSON.stringify(resposta) === JSON.stringify(inseridos)) {
          zone.classList.add("correct");
          zone.classList.remove("wrong");
          if (!checkExistente) {
            const check = document.createElement("span");
            check.className = "checkmark";
            check.textContent = "‚úì";
            zone.appendChild(check);
          }
        } else {
          zone.classList.remove("correct");
          zone.classList.add("wrong");
          if (checkExistente) checkExistente.remove();
        }
      }

      document.getElementById("limpar").addEventListener("click", () => {
        document.querySelectorAll(".dropzone").forEach((zone) => {
          zone.innerHTML = "";
          zone.classList.remove("correct", "wrong");
        });
      });
    </script>
  </body>
</html>
